(function(){function sendDefault(e,t,n,r,i,a){a=a||noop,2036>=n.length?sendWithImage(e,t,n,r,i,a):sendWithBeacon(e,t,n,r,i,a)||sendWithXHR(e,t,n,r,i,a)||sendWithImage(e,t,n,r,i,a)}function sendWithImage(e,t,n,r,i,a){if(e&&e.get(_test_mode)&&(log("sendWithImage: "+r+": "+n),e.get(_log_only)))return a(null,r,i);var o=createBeaconImage(t+"?"+n);o.onload=o.onerror=function(){o.onload=null,o.onerror=null,a(null,r,i)}}function sendWithBeacon(e,t,n,r,i,a){if(e&&e.get(_test_mode)){if(!window.navigator.sendBeacon)return!1;if(log("sendWithBeacon: "+r+": "+n),e.get(_log_only))return a(null,r,i),!0}return!!window.navigator.sendBeacon&&(!!window.navigator.sendBeacon(t,n)&&(a(null,r,i),!0))}function sendWithXHR(e,t,n,r,i,a,o){var s="retrieve"==r;if(e&&e.get(_test_mode)&&(log("sendWithXHR: "+r+": "+n),e.get(_log_only)&&!s))return a(null,r,i),!0;if(!window.XMLHttpRequest)return!1;var l=new window.XMLHttpRequest;"withCredentials"in l&&(l.withCredentials=!0),o=o||0;var d,c,u,_,g,p,f,m=null,h=function(s){s=s||m||l&&l.statusText,trigger("error",s,r,i),e.get(_silent)||logError(s),l.retry?sendWithXHR(e,t,n,r,i,a,o+1):a(s,r,i,l)};return l.open("POST",t,!0),l.withCredentials=!0,l.timeout=e.getNumber(_timeout)||2e4,l.setRequestHeader("Content-Type","text/plain"),l.onreadystatechange=function(){if(4===l.readyState&&(c&&e.set(_sending_count,e.getNumber(_sending_count)-1),e.set(_sending,e.getNumber(_sending_count)>0),m=l.responseText,l.getResponseHeader("content-type")&&~l.getResponseHeader("content-type").indexOf("application/json")))try{l.responseJSON=m=JSON.parse(m)}catch(e){m=l.responseText}},l.onloadstart=function(){c=!0,e.set(_sending_count,e.getNumber(_sending_count)+1),e.set(_sending,!0),trigger("sending",r,e.getParams(),i,n)},l.onload=function(){if(4===l.readyState){if(!(200<=l.status&&l.status<300))return h();try{u=l.getResponseHeader("X-Certification-Token"),_=l.getResponseHeader("X-Download-URL"),g=l.getResponseHeader("X-Activity-Batch"),p=l.getResponseHeader("X-Activity-Session"),f=l.getResponseHeader("X-Signer-UUID"),u&&e.set(_download_token,u),_&&e.set(_download_url,_),g&&e.set(_batch,g),p&&e.set(_session,p),f&&e.get(_uuid)!=f&&generateUUID(e,f)}catch(e){}a(null,r,i,l,g)}},l.onerror=function(){d=null,4===l.readyState&&0===l.status&&(d="Send encountered a network error"),h(d)},l.onabort=function(){h("Send aborted by browser")},l.ontimeout=function(){o<e.getNumber(_retry_attempts)&&(l.retry=!0),h("Send timed out")},l.send(n),!0}function optOutFilter(e){if(isOptedOut(getParameterValue(e,_site_id)))throw"opted_out"}function isValidProtocol(){var e=document.location.protocol;if("http:"!=e&&"https:"!=e)throw"invalid_protocol"}function buildAction(e){e.set(_send_count,getParameterNumber(e,_send_count)+1),e.set(_event_payload,e.getPayload(),!0)}function sendAction(e){var t=getParameterValue(e,_transport_url)||transportHost()+"/send",n=getParameterValue(e,_transport),r=getParameterValue(e,_event_type),i=e.get(_context),a=getParameterValue(e,_event_payload),o=e.get(_event_callback)||noop,s="retrieve"==r;!n&&window.navigator.sendBeacon&&(n="beacon"),getParameterValue(e,_synchronous_sending)&&"xhr"===n&&!s&&(t+="/sync"),s?sendWithXHR(e,t,a,r,i,o):e.get(_disable_sending)?o(null,r,i,a):n?"image"==n?sendWithImage(e,t,a,r,i,o):"xhr"==n&&sendWithXHR(e,t,a,r,i,o)||"beacon"==n&&sendWithBeacon(e,t,a,r,i,o)||sendDefault(e,t,a,r,i,o):sendDefault(e,t,a,r,i,o),e.set(_event_callback,noop,!0)}function validatePreviewState(){if(window.navigator&&"preview"==window.navigator.loadPurpose)throw"preview_state"}function validateRequiredParameters(e){var t=e.get(_site_id),n=e.get(_signer_id),r=e.get(_event_type),i=e.get(_external_url);if(isFalsy(t))throw"missing_site_id";if(isFalsy(n)&&-1===anonymousEvents.indexOf(r))throw"missing_signer_id";if(e.get(_external)&&(!i||!i.length))throw"missing_external_url"}function enforceRateLimit(e){var t=getParameterNumber(e,_events_called),n=getParameterValue(e,_event_type);if("agreed"!=n&&"disagreed"!=n){var r=getParameterNumber(e,_sends_available),i=(new Date).getTime(),a=getParameterNumber(e,_last_sent);0==a&&e.set(_last_sent,i);var o=Math.round(2*(i-a)/1e3);if(0<o&&(r=Math.min(r+o,20),e.set(_last_sent,i)),0>=r)throw"rate_limit_exceeded";e.set(_sends_available,--r)}e.set(_events_called,++t)}function getFlashVersion(){var e,t,n;if((n=(n=window.navigator)?n.plugins:null)&&n.length)for(var r=0;r<n.length&&!t;r++){var i=n[r];-1<i.name.indexOf("Shockwave Flash")&&(t=i.description)}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),t=e.GetVariable("$version")}catch(e){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="WIN 6,0,21,0",e.AllowScriptAccess="always",t=e.GetVariable("$version")}catch(e){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t=e.GetVariable("$version")}catch(e){}return t&&(e=t.match(/[\d]+/g))&&3<=e.length&&(t=e[0]+"."+e[1]+" r"+e[2]),t||void 0}function defineMethod(e,t,n){t[e]=function(){try{return n.apply(this,arguments)}catch(n){var r=n&&n.name+": "+n.message;throw trigger("error",r,e,t),logError(n),beaconSendError(null,"exec",e,r),n}}}function createEvent(e,t){var n;return isFunction(document.defaultView.CustomEvent)?n=new CustomEvent(e,{bubbles:!0,cancelable:!1,detail:t}):document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!1)):document.createEventObject&&(n=document.createEventObject(),n.eventType=e),n.eventName=e,n}function ready(){if(!_PactSafe.readyFired){_PactSafe.readyFired=!0;for(var e=0;e<Runner.onReady.length;e++)isFunction(Runner.onReady[e])&&Runner.onReady[e]();Runner.onReady=[]}}function readyStateChange(){"complete"===document.readyState&&ready()}function attachReadyHandlers(){"complete"===document.readyState?setTimeout(ready,1):_PactSafe.readyHandlersAttached||(document.addEventListener?(document.addEventListener("DOMContentLoaded",ready,!1),window.addEventListener("load",ready,!1)):(document.attachEvent("onreadystatechange",readyStateChange),window.attachEvent("onload",ready)),_PactSafe.readyHandlersAttached=!0)}Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var a=+t||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);i>n;){if(n in r&&r[n]===e)return n;n++}return-1});var _json="undefined"!=typeof JSON?JSON:{};_json._stringify=_json.stringify||function(e){var t=typeof e;if("object"!==t||null===e)return"string"===t&&(e='"'+e+'"'),String(e);var n,r,i=[],a=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,"string"===t?r='"'+r+'"':"object"===t&&null!==r&&(r=_json._stringify(r)),i.push((a?"":'"'+n+'":')+String(r));return(a?"[":"{")+String(i)+(a?"]":"}")},_json._parse=_json.parse||function(text){var j=null;return text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,""))&&(j=eval("("+text+")")),j};var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,noop=function(){},_isIE=function(){try{var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])<=9}catch(e){return!1}},_log_stringify=_isIE(),_log_support="undefined"!=typeof console&&void 0!==console.log,log=function(e){if(_log_support)try{console.log(e)}catch(e){}},logError=function(e){if(_log_support)try{var t=_log_stringify?_json._stringify([].slice.call(arguments)):arguments;isFunction(console.error)?console.error(t):console.log(t)}catch(e){}},logDebug=function(e){if(_log_support)try{var t=_log_stringify?_json._stringify([].slice.call(arguments)):arguments;isFunction(console.debug)?console.debug(t):console.log(t)}catch(e){}},isFunction=function(e){return"function"==typeof e},isArray=function(e){return"[object Array]"==Object.prototype.toString.call(Object(e))},isNode=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},isElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isString=function(e){return null!=e&&-1<(e.constructor+"").indexOf("String")},isBlank=function(e){return null==e||-1===(e.constructor+"").indexOf("String")||/^\s*$/.test(e)},isFalsy=function(e){return null==e||"string"!=typeof e&&"number"!=typeof e||"number"==typeof e&&isNaN(e)||1/0==e||-1<(e.constructor+"").indexOf("String")&&/^\s*$/.test(e)},_bind=function(e,t){if(!isFunction(e))return noop;var n=Function.prototype.bind;if(n&&e.bind===n)return n.apply(e,[].slice.call(arguments,1));var r=[].slice.call(arguments,2);return function(){e.apply(t,r)}},startsWith=function(e,t){return 0==e.indexOf(t)},toObject=function(e,t){if(1==t.length&&null!=t[0]&&"object"==typeof t[0]&&!isArray(t[0]))return t[0];for(var n={},r=Math.min(e.length+1,t.length),i=0;i<r;i++)if(isArray(t[i]))i<e.length&&(n[e[i]]=t[i]);else{if("object"==typeof t[i]&&null!=t[i]){for(var a in t[i])t[i].hasOwnProperty(a)&&(n[a]=t[i][a]);break}i<e.length&&(n[e[i]]=t[i])}return n},getElement=function(e){var t=null;return isElement(e)||isNode(e)?t=e:isBlank(e)||(t=document.getElementById(e),t||(t=document.getElementsByName(e),t=t&&0<t.length?t[0]:null)),t},getElementSelector=function(e){return isElement(e)||isNode(e)?e.hasAttribute("id")?getAttribute(e,"id"):e.hasAttribute("name")?getAttribute(e,"name"):null:null},getByClassName=function(e,t){return e.querySelectorAll("."+t)},tryEncodeURIComponent=function(e){var t=e;return isFunction(e)&&(t=e()),"object"!=typeof t||isArray(t)||(t=_json._stringify(t)),encodeURIComponent instanceof Function?encodeURIComponent(t):t},removeUnicodeSpaces=function(e){return e?e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""},encodeParentheses=function(e){return tryEncodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")},createBeaconImage=function(e){var t=document.createElement("img");return t.width=1,t.height=1,t.src=e,t},createScriptElement=function(e,t){if(e){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,t&&isFunction(t)&&(n.onerror=t);var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}},listenTo=function(e,t,n,r){try{stopListening(e,t,n),e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent&&e.attachEvent("on"+t,n)}catch(e){}},stopListening=function(e,t,n){try{e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}catch(e){}},emit=function(e,t,n){try{n=n||document,n.dispatchEvent&&n.dispatchEvent(createEvent(e,t))}catch(e){}},getAttribute=function(e,t,n){return e&&(n=e.getAttribute(t)),n},setAttribute=function(e,t,n){if(e)if(isArray(t)&&isArray(n)){t.length<n.length&&(n=n.slice(0,t.length-1));for(var r=0;r<t.length;r++)e.setAttribute(t[r],n[r])}else e.setAttribute(t,n)},addClass=function(e,t){var n=null,r="";t=""+t;n=e.className.split(" "),-1===n.indexOf(t)&&(r=e.className+" "+t,e.className=r.trim())},removeClass=function(e,t){var n=null,r="";t=""+t;if(n=e.className.split(" "),-1!==n.indexOf(t)){for(var i=0;i<n.length;i++)n[i]&&n[i]!=t&&(r+=n[i]+" ");e.className=r.trim()}},hasClass=function(e,t){var n=null;t=""+t;return n=e.className.split(" "),-1!==n.indexOf(t)},findInputByType=function(e,t,n,r,i){if(r=null,e){i=e.getElementsByTagName(t);for(var a=0;a<i.length;a++)if(n==(getAttribute(i[a],"type")||"").toLowerCase()){r=i[a];break}}return r},isHTTPS=function(){return"https:"==document.location.protocol},getHostname=function(){var e=""+document.location.hostname;return 0==e.indexOf("www.")?e.substring(4):e},getReferrer=function(e){var t=document.referrer;if(/^https?:\/\//i.test(t)){if(e)return t;var n="//"+document.location.hostname,r=t.indexOf(n);if((5==r||6==r)&&(n=t.charAt(r+n.length),"/"==n||"?"==n||""==n||":"==n))return;return t}},generateRandomValue=function(){return Math.round(2147483647*Math.random())},generateCacheBuster=function(){try{var e=new Uint32Array(1);return window.crypto.getRandomValues(e),2147483647&e[0]}catch(e){return generateRandomValue()}},hashValue=function(e){var t,n=1,r=0;if(e)for(n=0,t=e.length-1;0<=t;t--)r=e.charCodeAt(t),n=(n<<6&268435455)+r+(r<<14),r=266338304&n,n=0!=r?n^r>>21:n;return n},DataObject=function(){this.keys=[],this.values={},this.overrides={}};DataObject.prototype.set=function(e,t,n){this.keys.indexOf(""+e)<0&&this.keys.push(""+e),n?this.overrides[":"+e]=t:this.values[":"+e]=t},DataObject.prototype.get=function(e){return this.overrides.hasOwnProperty(":"+e)?this.overrides[":"+e]:this.values[":"+e]},DataObject.prototype.map=function(e){for(var t=0;t<this.keys.length;t++){var n=this.keys[t],r=this.get(n);null!=r&&e(n,r)}};for(var generateBrowserHash=function(){for(var e=window.navigator.userAgent+(document.cookie?document.cookie:"")+(document.referrer?document.referrer:""),t=e.length,n=window.history.length;0<n;)e+=n--^t++;return hashValue(e)},objectIdIndex=parseInt(16777215*Math.random(),10),maxBits=[],i=0;i<64;i++)maxBits[i]=Math.pow(2,i);for(var hexTable=[],i=0;i<256;i++)hexTable[i]=(i<=15?"0":"")+i.toString(16);var generateObjectId=function(e){"number"!=typeof e&&(e=parseInt((new Date).getTime()/1e3,10)),objectIdIndex=(objectIdIndex+1)%16777215;for(var t=encodeInt(e,32,!0,!0),n=encodeInt(parseInt(16777215*Math.random(),10),24,!1),r=encodeInt(Math.floor(1e5*Math.random()),16,!0),i=encodeInt(objectIdIndex,24,!1,!0),a=t+n+r+i,o="",s=0;s<a.length;s++)o+=hexTable[a.charCodeAt(s)];return o},encodeInt=function(e,t,n,r){var i=maxBits[t];(e>=i||e<-i/2)&&(e=0),e<0&&(e+=i);for(var a=[];e;a[a.length]=String.fromCharCode(e%256),e=Math.floor(e/256));for(t=-(-t>>3)-a.length;t--;a[a.length]="\0");return(r?a.reverse():a).join("")},validateObjectId=function(e){return null!=e&&((null==e||"number"==typeof e||12==e.length||24==e.length)&&("string"!=typeof e||24!=e.length||isValidObjectId.test(e)))},isOptedOut=function(e){if(window._psPrefs&&window._psPrefs.ioo&&window._psPrefs.ioo()||e&&!0===window["ps-disable-"+e])return!0;try{if(window.external&&window.external._psPrefs&&"oo"==window.external._psPrefs)return!0}catch(e){}return!1},getCookieByName=function(e){var t=[],n=document.cookie.split(";");e=new RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var r=0;r<n.length;r++){var i=n[r].match(e);i&&t.push(i[1])}return t},createCookie=function(e,t,n,r,i,a){var o=!isOptedOut(i)&&("/"!=n||!psDomain.test(r));if(!o)return!1;t&&1200<t.length&&(t=t.substring(0,1200));var s=e+"="+t+"; path="+n+"; ";a&&(s+="expires="+new Date((new Date).getTime()+a).toGMTString()+"; "),r&&"none"!=r&&(s+="domain="+r+";");var l,d=document.cookie;if(document.cookie=s,!(l=d!=document.cookie))e:{for(var c=getCookieByName(e),u=0;u<c.length;u++)if(t==c[u]){l=!0;break e}l=!1}return l},_debounce=function(e,t,n){var r,i,a,o,s,l=function(){var d=(new Date).getTime()-o;d<t&&d>=0?r=setTimeout(l,t-d):(r=null,n||(s=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=(new Date).getTime();var d=n&&!r;return r||(r=setTimeout(l,t)),d&&(s=e.apply(a,i),a=i=null),s}},_throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:(new Date).getTime(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var d=(new Date).getTime();s||!1!==n.leading||(s=d);var c=t-(d-s);return r=this,i=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=d,a=e.apply(r,i),o||(r=i=null)):o||!1===n.trailing||(o=setTimeout(l,c)),a}},psDomain=/^(www\.)?pactsafe(\.io?)?(\.[a-z]{2})?$/,isValidSiteId=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,isValidObjectId=/^[0-9a-fA-F]{24}$/,transportHost=function(){return(_forceSSL||isHTTPS()?"https:":"http:")+"//"+_PactSafe.envAPI},beaconSendError=function(e,t,n,r){var i=isOptedOut(e?e.get(_site_id):"?");if(!i){var a=["et=error","_err="+t];e&&(a.push("_lib="+e.get(_client_library)),a.push("_libv="+e.get(_client_version)),a.push("sig="+e.get(_signer_id)),a.push("sid="+e.get(_site_id))),n&&a.push("_dtl="+n),r&&a.push("_msg="+tryEncodeURIComponent(r.substring(0,100))),a.push("nc="+generateRandomValue()),sendWithImage(e,transportHost()+"/send",a.join("&"),null,null,noop),e&&e.get(_event_callback)&&e.get(_event_callback)(r,e.get(_event_type),e.get(_context))}},translationExists=function(e,t){if(!window.XMLHttpRequest)return!1;var n=new window.XMLHttpRequest;return n.open("GET",e,!0),"withCredentials"in n&&(n.withCredentials=!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&(t(this.responseText&&this.responseText.indexOf("<Contents>")>-1),n=null)},n.send(),!0},TaskStore=function(){this.functions=[]};TaskStore.prototype.add=function(e){this.functions.push(e)},TaskStore.prototype.executeTasks=function(e){var t=null,n=null,r=null;try{for(var i=0;i<this.functions.length;i++)t=this.functions[i],n=e.get(t),n&&isFunction(n)&&n.call(window,e)}catch(n){r=n;var a="Command aborted on: "+t+", Error: "+(n&&n.name?n.name+": "+n.message:n||"");trigger("error",a,e.get(_event_type),e.get(_context)),e.get(_silent)||logError(a)}var o=e.get(_event_callback);o!=noop&&isFunction(o)&&o.call(this,r,e.get(_event_type),e.get(_context))&&e.set(_event_callback,noop,!0)};var anonymousEvents=["visited","displayed"],runTiming=function(e,t){var n=Math.min(getParameterNumber(e,_speed_sample_rate),100);if(!(hashValue(getParameterValue(e,_uuid))%100>=n)&&(n={},setPageLoadTiming(n)||setExternalPageLoadTiming(n))){var r=n[_loadStep1];null==r||1/0==r||isNaN(r)||(0<r?(validateNumber(n,_loadStep3),validateNumber(n,_loadStep6),validateNumber(n,_loadStep5),validateNumber(n,_loadStep2),validateNumber(n,_loadStep4),validateNumber(n,_loadStep7),validateNumber(n,_loadStep8),t(n)):listenTo(window,"load",function(){runTiming(e,t)},!1))}},setPageLoadTiming=function(e){var t=window.performance||window.webkitPerformance;t=t&&t.timing;if(!t)return!1;var n=t.navigationStart;return 0!=n&&(e[_loadStep1]=t.loadEventStart-n,e[_loadStep3]=t.domainLookupEnd-t.domainLookupStart,e[_loadStep6]=t.connectEnd-t.connectStart,e[_loadStep5]=t.responseStart-t.requestStart,e[_loadStep2]=t.responseEnd-t.responseStart,e[_loadStep4]=t.fetchStart-n,e[_loadStep7]=t.domInteractive-n,e[_loadStep8]=t.domContentLoadedEventStart-n,!0)},setExternalPageLoadTiming=function(e){if(window.top!=window)return!1;var t=window.external,n=t&&t.onloadT;return t&&!t.isValidLoadTime&&(n=void 0),2147483648<n&&(n=void 0),0<n&&t.setPageReadyTime(),null!=n&&(e[_loadStep1]=n,!0)},validateNumber=function(e,t){var n=e[t];(isNaN(n)||1/0==n||0>n)&&(e[t]=void 0)},sendTiming=function(e){return function(t){"displayed"!=t.get(_event_type)||e.initiatedTiming||(e.initiatedTiming=!0,runTiming(t,function(t){e.send("timing",t)}))}},generateUUID=function(e,t){if("cookie"==getParameterValue(e,_storage)){var n;uuidSet=!1;e:{var r=getCookieByName(getParameterValue(e,_cookie_name));if(r&&!(1>r.length)){for(var i=[],a=0;a<r.length;a++){var o,s=r[a].split("."),l=s.shift();"ps"==l&&1<s.length?(l=s.shift().split("-"),1==l.length&&(l[1]="1"),l[0]*=1,l[1]*=1,o={levels:l,value:s.join(".")}):o=void 0,o&&i.push(o)}if(1==i.length){n=i[0].value;break e}if(0<i.length){var d=countDomainParts(getParameterValue(e,_cookie_domain));if(i=returnHighestLevelCookie(i,d,0),1==i.length){n=i[0].value;break e}var c=countPathParts(getParameterValue(e,_cookie_path));i=returnHighestLevelCookie(i,c,1),n=i[0]&&i[0].value;break e}}n=void 0}n&&(e.data.set(_uuid,n),uuidSet=!0)}t&&e.data.set(_uuid,tryEncodeURIComponent(t)),e.get(_uuid)||e.data.set(_uuid,generateObjectId()),setUUIDCookie(e)},setSystemInfo=function(e){window.navigator;var t=window.screen;document.location;if(e.set(_referrer,getReferrer(e.get(_send_referrer))),document.location){var n=document.location.pathname||"";"/"!=n.charAt(0)&&(n="/"+n),e.set(_page_url,document.location.protocol+"//"+document.location.hostname+n+document.location.search),e.set(_page_domain,document.location.host),e.set(_page_path,document.location.pathname)}window.screen&&e.set(_screen_resolution,window.screen.width+"x"+window.screen.height),window.screen&&e.set(_screen_color_depth,window.screen.colorDepth+"-bit");t=document.documentElement;var r=(n=document.body)&&n.clientWidth&&n.clientHeight,i=[];document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight&&("CSS1Compat"===document.compatMode||!r)?i=[document.documentElement.clientWidth,document.documentElement.clientHeight]:r&&(i=[n.clientWidth,n.clientHeight]),t=0>=i[0]||0>=i[1]?"":i.join("x"),e.set(_screen_dimensions,t),e.set(_flash_version,getFlashVersion()),e.set(_page_encoding,document.characterSet||document.charset),e.set(_java_enabled,window.navigator&&"function"==typeof window.navigator.javaEnabled&&window.navigator.javaEnabled()||!1),e.set(_browser_locale,getBrowserLocale()),e.set(_browser_timezone,(new Date).getTimezoneOffset()/60),e.set(_operating_system,detectOperatingSystem()),e.set(_environment,detectEnvironment()),e.set(_jurisdiction,getBrowserLocale())},getBrowserLocale=function(){return(window.navigator&&(window.navigator.language||window.navigator.browserLanguage)||"").toLowerCase()},detectOperatingSystem=function(){var e="Unknown";if(!window.navigator)return e;var t=window.navigator.userAgent;return/(Windows|WinNT4.0|Win16|Win 9x 4.90)/.test(t)?e="Windows":/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/.test(t)?e="MacOS":/Android/.test(t)?e="Android":/CrOS/.test(t)?e="Chrome OS":/(iPhone|iPad|iPod)/.test(t)?e="iOS":/(Linux|X11(?!.*CrOS))/.test(t)?e="Linux":/UNIX/.test(t)?e="UNIX":/GoogleBot/.test(t)&&(e="GoogleBot"),e},detectEnvironment=function(){var e="desktop";return window.navigator?/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)&&(e="mobile"):e="other",e},uuidSet=!1,setUUIDCookie=function(e){if("cookie"==getParameterValue(e,_storage)){var t=getParameterValue(e,_cookie_name),n=generateCookieValue(e),r=prependSlash(getParameterValue(e,_cookie_path)),i=trimPeriod(getParameterValue(e,_cookie_domain)),a=1e3*getParameterNumber(e,_cookie_expires),o=getParameterValue(e,_site_id);if("auto"!=i)createCookie(t,n,r,i,o,a)&&(uuidSet=!0);else{var s,l;if(subdomains=[],i=getHostname().split("."),4!=i.length||(l=i[i.length-1],parseInt(l,10)!=l)){for(var d=i.length-2;0<=d;d--)subdomains.push(i.slice(d).join("."));subdomains.push("none"),s=subdomains}else s=["none"];for(var c=0;c<s.length;c++)if(i=s[c],e.data.set(_cookie_domain,i),n=generateCookieValue(e),createCookie(t,n,r,i,o,a))return void(uuidSet=!0);e.data.set(_cookie_domain,"auto")}}},validateUUIDCookie=function(e){uuidSet||"cookie"!=getParameterValue(e,_storage)||(setUUIDCookie(e),uuidSet||log("Warning: Unable to set UUID cookie"))},generateCookieValue=function(e){var t=encodeParentheses(getParameterValue(e,_uuid)),n=countDomainParts(getParameterValue(e,_cookie_domain)),r=countPathParts(getParameterValue(e,_cookie_path));return 1<r&&(n+="-"+r),["ps",n,t].join(".")},returnHighestLevelCookie=function(e,t,n){for(var r,i=[],a=[],o=0;o<e.length;o++){var s=e[o];s.levels[n]==t?i.push(s):null==r||s.levels[n]<r?(a=[s],r=s.levels[n]):s.levels[n]==r&&a.push(s)}return 0<i.length?i:a},trimPeriod=function(e){return 0==e.indexOf(".")?e.substr(1):e},countDomainParts=function(e){return trimPeriod(e).split(".").length},prependSlash=function(e){return e?(1<e.length&&e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1)),0!=e.indexOf("/")&&(e="/"+e),e):"/"},countPathParts=function(e){return e=prependSlash(e),"/"==e?1:e.split("/").length},ParameterStore=function(e){this.data=new DataObject,e&&(this.context=e)},ParameterDefinitionMap=new DataObject,ParameterDefinitions=[],getParameterValue=function(e,t){var n=e.get(t);return null==n?"":""+n},getParameterNumber=function(e,t){var n=e.get(t);return null==n||""===n?0:1*n},setParameterValue=function(e,t,n,r){if(null!=n)switch(t){case _site_id:isValidSiteId.test(n)}var i=getParameterDefinition(t);i&&i.setter?i.setter(e,t,n,r):e.data.set(t,n,r)};ParameterStore.prototype.get=function(e){var t=getParameterDefinition(e),n=this.data.get(e);return t&&null==n&&(n=isFunction(t.defaultValue)?t.defaultValue():t.defaultValue),t&&t.getter?t.getter(this,e,n):n},ParameterStore.prototype.getNumber=function(e){return getParameterNumber(this,e)},ParameterStore.prototype.set=function(e,t,n){if(e)if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&setParameterValue(this,r,e[r],n);else setParameterValue(this,e,t,n)},ParameterStore.prototype.extend=function(e,t,n){if(e){var r=getParameterValue(this,e);if(r&&"object"==typeof r||(r={}),t&&"object"==typeof t){for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);setParameterValue(this,e,r,n)}}},ParameterStore.prototype.getParams=function(e){var t,n=this,r={};return e&&this.set(e,void 0,!0),ParameterDefinitionMap.map(function(e,i){i.shortName&&(t=n.get(e),null!=t&&(r[e]=t))}),e&&(this.data.overrides={}),r},ParameterStore.prototype.getPayload=function(e){var t,n=this,r=[];return e&&this.set(e,void 0,!0),ParameterDefinitionMap.map(function(e,i){i.shortName&&(t=n.get(e),null!=t&&t!=i.defaultValue&&("boolean"==typeof t&&(t*=1),r.push(i.shortName+"="+tryEncodeURIComponent(t))))}),e&&(this.data.overrides={}),r.push("nc="+generateCacheBuster()),r.join("&")},ParameterStore.prototype.toObject=function(){for(var e,t,n={},r=0;r<this.data.keys.length;r++)e=this.data.keys[r],t=this.get(e),isFunction(t)||(n[e]=t);return n};var ParameterDefinition=function(e,t,n,r,i){this.name=e,this.shortName=t,this.getter=r,this.setter=i,this.defaultValue=n},getParameterDefinition=function(e){var t=ParameterDefinitionMap.get(e);if(!t)for(var n=0;n<ParameterDefinitions.length;n++){var r=ParameterDefinitions[n],i=r[0].exec(e);if(i){t=r[1](i),ParameterDefinitionMap.set(t.name,t);break}}return t},getParameterName=function(e){var t;return ParameterDefinitionMap.map(function(n,r){r.shortName==e&&(t=r)}),t&&t.name},defineParameter=function(e,t,n,r,i){return e=new ParameterDefinition(e,t,n,r,i),ParameterDefinitionMap.set(e.name,e),e.name},defineParameterGroup=function(e,t){ParameterDefinitions.push([new RegExp("^"+e+"$"),t])},defineProperty=function(e,t,n){return defineParameter(e,t,n,void 0,noop)},elementGetter=function(e,t,n){return getElement(n)},elementSetter=function(e,t,n,r){var i=null;n&&(i=isString(n)?n:getElementSelector(n)),i||(i=n),e.data.set(t,i,r)},emitSetter=function(e,t,n,r){e.data.set(t,n,r),r||(trigger("set",t,n,e.context||e),trigger("set:"+t,n,e.context||e),emit("set:"+t,n,e.get(_element)),emit("set",{name:t,value:n},e.get(_element)))},numberSetter=function(e,t,n,r){var i=parseInt(n);i&&e.data.set(t,i,r)},_globalName=isString(window.PactSafeObject)&&removeUnicodeSpaces(window.PactSafeObject)||"_ps",_forceSSL=!1,_client_version=defineProperty("client_version","_libv"),_client_library=defineProperty("client_library","_lib"),_name=defineProperty("name"),_uuid=defineProperty("uuid","uid"),_cookie_name=defineProperty("cookie_name",void 0,"_psr"),_cookie_domain=defineProperty("cookie_domain"),_cookie_path=defineProperty("cookie_path",void 0,"/"),_cookie_expires=defineProperty("cookie_expires",void 0,63072e3),_storage=defineProperty("storage",void 0,"cookie"),_sample_rate=defineProperty("sample_rate","sf",100),_speed_sample_rate=defineProperty("speed_sample_rate",void 0,1),_send_referrer=defineProperty("send_referrer",void 0,!0),_site_id=defineParameter("site_id","sid"),_event_type=defineParameter("event_type","et"),_execution_method=defineParameter("execution_method","em"),_signer_id=defineParameter("signer_id","sig",void 0,void 0,emitSetter),_revisions=defineParameter("revisions","rev"),_versions=defineParameter("versions","vid"),_major_versions=defineParameter("major_versions"),_contracts=defineParameter("contracts","cid"),_group=defineParameter("group","gid"),_request=defineParameter("request","srid"),_custom_data=defineParameter("custom_data","cus"),_field_data=defineParameter("field_data","fdt"),_non_interaction=defineParameter("non_interaction","ni"),_external=defineParameter("external","xt"),_external_url=defineParameter("external_url","xtu"),_confirmation_email=defineParameter("confirmation_email","cnf"),_notification_email=defineParameter("notification_email","ntf"),_test_mode=defineParameter("test_mode","tm"),_log_only=defineParameter("log_only"),_silent=defineParameter("silent",void 0,!0),_disable_sending=defineParameter("disable_sending"),_force_send=defineParameter("force_send"),_timeout=defineParameter("timeout",void 0,2e4),_retry_attempts=defineParameter("retry_attempts",void 0,2),_localized=defineParameter("localized",void 0,!1),_page_title=defineParameter("page_title","pat",function(){return document.title||void 0}),_page_url=defineParameter("page_url","pau"),_page_domain=defineParameter("page_domain","pad"),_page_path=defineParameter("page_path","pap"),_page_query=defineParameter("page_query","paq"),_page_encoding=defineParameter("page_encoding","pae"),_hostname=defineParameter("hostname","hn",getHostname()),_referrer=defineParameter("referrer","ref"),_browser_timezone=defineParameter("browser_timezone","btz"),_browser_locale=defineParameter("browser_locale","bl"),_user_agent=defineParameter("user_agent","bua"),_java_enabled=defineParameter("java_enabled","bje"),_flash_version=defineParameter("flash_version","bfv"),_device_fingerprint=defineParameter("device_fingerprint","df"),_operating_system=defineParameter("operating_system","os"),_environment=defineParameter("environment","env"),_screen_color_depth=defineParameter("screen_color_depth","scd"),_screen_resolution=defineParameter("screen_resolution","res"),_screen_dimensions=defineParameter("screen_dimensions","dim"),_jurisdiction=defineParameter("jurisdiction","jur"),_cookies=defineParameter("cookies","ck"),_nonce=defineParameter("nonce","nc"),_context=defineParameter("_context"),_event_callback=defineParameter("event_callback"),_event_payload=defineParameter("event_payload"),_transport=defineParameter("transport"),_transport_url=defineParameter("transport_url"),_synchronous_sending=defineParameter("synchronous_sending"),_events_called=defineParameter("_ec",void 0,0),_last_sent=defineParameter("_last_sent",void 0,0),_sends_available=defineParameter("_sends_available",void 0,20),_send_count=defineParameter("_s","_s"),_sending_count=defineParameter("_sending_count",void 0,0),_sending=defineParameter("sending",void 0,!1),_rate=defineParameter("_r","_r"),_ct=defineParameter("_ct","_ct"),_batch=defineParameter("batch",void 0,void 0,void 0,emitSetter),_session=defineParameter("session","sess",void 0,void 0,emitSetter),_download_token=defineParameter("download_token"),_download_url=defineParameter("download_url",void 0,void 0,function(e,t,n){return!n&&e.context&&e.context.site&&(n=e.context.site.get(t),n&&(n+="&gid="+e.get(_group))),n},emitSetter),_loadStep1=defineParameter("l1","plt"),_loadStep2=defineParameter("l2","pdt"),_loadStep3=defineParameter("l3","dns"),_loadStep4=defineParameter("l4","rrt"),_loadStep5=defineParameter("l5","srt"),_loadStep6=defineParameter("l6","tcp"),_loadStep7=defineParameter("l7","dit"),_loadStep8=defineParameter("l8","clt"),_timingCategory=defineParameter("timingCategory","utc"),_timingVar=defineParameter("timingVar","utv"),_timingLabel=defineParameter("timingLabel","utl"),_timingValue=defineParameter("timingValue","utt");defineParameter("forceSSL",void 0,void 0,function(){return _forceSSL},function(e,t,n){_forceSSL=!!n}),defineParameterGroup("\\&(.*)",function(e){var t=new ParameterDefinition(e[0],e[1]),n=getParameterName(e[0].substring(1));return n&&(t.getter=function(e){
return e.get(n)},t.setter=function(e,t,r,i){e.set(n,r,i)},t.shortName=void 0),t});var _key=defineParameter("key","gkey"),_filter=defineParameter("filter","fltr"),_sort=defineParameter("sort","sort"),_type=defineParameter("type","gtyp"),_selector=defineParameter("selector"),_container_selector=defineParameter("container_selector","csel"),_element=defineParameter("_element",void 0,void 0,elementGetter,elementSetter),_custom_styles=defineParameter("custom_styles","csty"),_form_selector=defineParameter("form_selector","fsel",void 0,void 0,emitSetter),_signer_id_selector=defineParameter("signer_id_selector","ssel",void 0,void 0,emitSetter),_contract_html=defineParameter("contract_html",void 0,void 0,void 0,emitSetter),_block_form_submission=defineParameter("block_form_submission","blk"),_force_scroll=defineParameter("force_scroll","fs"),_alert_message=defineParameter("alert_message","amsg"),_acceptance_language=defineParameter("acceptance_language","lang"),_auto_run=defineParameter("auto_run","arun"),_display_all=defineParameter("display_all","disp"),_agreed=defineParameter("agreed",void 0,void 0,void 0,emitSetter),_send_displayed=defineParameter("send_displayed",void 0,!0),_allow_disagreed=defineParameter("allow_disagreed"),_hidden_input_selector=defineProperty("hidden_input_selector"),_dynamic=defineParameter("dynamic","dyn"),_virtual=defineParameter("virtual","vrt"),_render_id=defineParameter("render_id","rdid",void 0,void 0,emitSetter),_render_data=defineParameter("render_data","rnd"),_scroll_listener=defineParameter("_scroll_listener"),_policy=defineParameter("policy"),_target_jurisdictions=defineParameter("target_jurisdictions");_snapshot_location=defineParameter("snapshot_location","slo");var _object_name=defineParameter("object_name"),_contract_class=defineParameter("contract_class"),_data_attr=defineParameter("data_attr"),_respondent_id=defineParameter("respondent_id",void 0,void 0,function(e){return e.get(_signer_id)},function(e,t,n,r){e.set(_signer_id,n,r)}),_agreements=defineParameter("agreements",void 0,void 0,function(e){return e.get(_contracts)},function(e,t,n,r){e.set(_contracts,n,r)}),_agreement_group=defineParameter("agreement_group",void 0,void 0,function(e){return e.get(_group)},function(e,t,n,r){e.set(_group,n,r)}),_respondent_id_selector=defineParameter("respondent_id_selector",void 0,void 0,function(e){return e.get(_signer_id_selector)},function(e,t,n,r){e.set(_signer_id_selector,n,r)}),_agreement_html=defineParameter("agreement_html",void 0,void 0,function(e){return e.get(_contract_html)},function(e,t,n,r){e.set(_contract_html,n,r)}),_src=defineProperty("src"),_class_name=defineProperty("class_name"),_target_selector=defineParameter("target_selector"),_style=defineParameter("style","sty"),_position=defineParameter("position",void 0,void 0,void 0,emitSetter),_stylesheet=defineParameter("stylesheet"),_legal_center_url=defineParameter("legal_center_url"),_open_legal_center=defineParameter("open_legal_center"),_always_visible=defineParameter("always_visible",void 0,void 0,void 0,emitSetter),_badge_text=defineParameter("badge_text"),_badge_updater=defineParameter("badge_updater"),_scroll_element=defineParameter("scroll_element",void 0,void 0,elementGetter,elementSetter),_badge_element=defineParameter("badge_element",void 0,void 0,elementGetter,elementSetter),_update_interval=defineParameter("update_interval",void 0,250,void 0,numberSetter),_mutation_observer=defineParameter("mutation_observer"),_optOutTask=defineProperty("_oot"),_previewTask=defineParameter("previewTask"),_checkProtocolTask=defineParameter("checkProtocolTask"),_validationTask=defineParameter("validationTask"),_checkStorageTask=defineParameter("checkStorageTask"),_rateLimitTask=defineParameter("_rlt"),_buildActionTask=defineParameter("buildActionTask"),_sendActionTask=defineParameter("sendActionTask"),_timingTask=defineParameter("timingTask"),GroupStore=function(){this.initialized=new DataObject,this.loaded=new DataObject},GroupDefinitionMap=new DataObject;GroupStore.prototype.get=function(e){return this.initialized.get(e)},GroupStore.prototype.add=function(e,t,n,r,i){var a;if(t)if("object"==typeof n)a=n;else if(isFunction(n))a=new n(r);else if(isString(n)&&GroupDefinitionMap.get(n)){var o=GroupDefinitionMap.get(n).factory;a=new o(r)}a&&(a.site=e,this.initialized.set(t,a),void 0===e||e.group||(e.group=a),trigger("initialized",t,a),emit("initialized",a,a.get(_element)),i&&isFunction(i)&&i.call(this,null,a))},GroupStore.prototype.getLoading=function(e){return this.loaded.get(e)},GroupStore.prototype.setLoading=function(e,t){e&&this.loaded.set(e,t)};var GroupDefinition=function(e,t){this.type=e,this.factory=t},defineGroup=function(e,t){isFunction(t)||(t=noop);var n=new GroupDefinition(e,t);return GroupDefinitionMap.set(n.type,n),n.type},Site=function(e){function t(e,t){r.parameters.data.set(e,t)}function n(e,n){t(e,n),r.tasks.add(e)}var r=this;r.parameters=new ParameterStore(r),r.tasks=new TaskStore,r.groups=new GroupStore,t(_name,e[_name]),t(_site_id,removeUnicodeSpaces(e[_site_id])),t(_cookie_name,e[_cookie_name]),t(_cookie_domain,e[_cookie_domain]||"auto"),t(_cookie_path,e[_cookie_path]),t(_cookie_expires,e[_cookie_expires]),t(_sample_rate,e[_sample_rate]),t(_speed_sample_rate,e[_speed_sample_rate]),t(_send_referrer,e[_send_referrer]),t(_localized,e[_localized]),t(_storage,e[_storage]),t(_signer_id,e[_signer_id]||e[_respondent_id]),t(_custom_data,e[_custom_data]),t(_field_data,e[_field_data]),t(_event_callback,e[_event_callback]),t(_test_mode,e[_test_mode]),t(_log_only,e[_log_only]),t(_silent,e[_silent]),t(_disable_sending,e[_disable_sending]),t(_force_send,e[_force_send]),t(_dynamic,e[_dynamic]),t(_transport,e[_transport]||"xhr"),t(_transport_url,e[_transport_url]),t(_synchronous_sending,e[_synchronous_sending]),t(_client_version,"1.2.0"),t(_client_library,"ps.js"),n(_optOutTask,optOutFilter),n(_previewTask,validatePreviewState),n(_checkProtocolTask,isValidProtocol),n(_validationTask,validateRequiredParameters),n(_checkStorageTask,validateUUIDCookie),n(_rateLimitTask,enforceRateLimit),n(_buildActionTask,buildAction),n(_sendActionTask,sendAction),n(_timingTask,sendTiming(r)),generateUUID(r.parameters,e[_uuid]),setSystemInfo(r.parameters),_listenTo("set:"+_signer_id,_bind(r.render,r))};Site.prototype.toString=function(){return"[object Site]"},Site.prototype.toJSON=function(){return this.getParams()},Site.prototype.get=function(e){return this.parameters.get(e)},Site.prototype.set=function(e,t){this.parameters.set(e,t)},Site.prototype.extend=function(e,t){this.parameters.extend(e,t)},Site.prototype.getParams=function(e){return this.parameters.getParams(e)},Site.prototype.getPayload=function(e){return this.parameters.getPayload(e)},Site.prototype.getByKey=function(e){return this.groups.get(e)},Site.prototype.getAllGroups=function(){var e=[];return this.groups.initialized.map(function(t,n){e.push(n)}),e};var sendCommandOptions={agreed:[_contracts,_versions,_group,_event_callback],disagreed:[_contracts,_versions,_group,_event_callback],displayed:[_contracts,_versions,_group,_event_callback],updated:[],retrieve:[_contracts,_event_callback],visited:[_contracts,_versions,_group,_event_callback],timing:[_timingCategory,_timingVar,_timingValue,_timingLabel]};Site.prototype.send=function(e){var t,n,r;1>arguments.length||("string"==typeof arguments[0]?(t=arguments[0],n=[].slice.call(arguments,1)):(t=arguments[0]&&arguments[0][_event_type],n=arguments),t&&(n=toObject(sendCommandOptions[t]||[],n),r=n[_event_callback]||this.parameters.get(_event_callback)||noop,n[_event_type]=t,n[_context]=n[_context]||this,n[_event_callback]=wrapCallback(r,n),this.parameters.set(n,void 0,!0),this.tasks.executeTasks(this.parameters),this.parameters.data.overrides={}))},Site.prototype.retrieve=function(e){if(!(1>arguments.length)){var t="retrieve",n=toObject(sendCommandOptions[t],arguments),r=n[_event_callback]||this.parameters.get(_event_callback)||noop;n[_event_type]=t,n[_transport_url]=transportHost()+"/"+t,n[_transport]="xhr",n[_event_callback]=parseRetrieve(r),n[_context]=n[_context]||this,this.parameters.set(n,void 0,!0),this.tasks.executeTasks(this.parameters),this.parameters.data.overrides={}}},Site.prototype.initialize=function(e){if(!(2>arguments.length)){var t=arguments[0],n=arguments[1],r=arguments.length>2&&"object"==typeof arguments[2]?arguments[2]:{},i=this.groups.getLoading(t),a=noop;if(!1!==i){if(i&&!0!==i&&(i[_event_callback]&&isFunction(i[_event_callback])&&(a=i[_event_callback]),"object"==typeof i))for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);i||this.groups.setLoading(t,!0),this.groups.add(this,t,n,r,a)}}};var loadCommandOptions=[_selector,_event_callback];Site.prototype.load=function(e){if(!(1>arguments.length)){var t,n,r,i,a,o,s,l,d=arguments[0];isString(d)||(d=null),arguments[0]&&"object"==typeof arguments[0]&&arguments[0].hasOwnProperty("filter")?l=!0:arguments.length>1&&arguments[1]&&"object"==typeof arguments[1]&&arguments[1].hasOwnProperty("filter")&&(l=!0),!l&&isBlank(d)||(3==arguments.length&&isFunction(arguments[2])?(t=toObject(loadCommandOptions,[arguments[1]]),t[_event_callback]=arguments[2]):t=l&&1==arguments.length?toObject(loadCommandOptions,[].slice.call(arguments,0)):toObject(loadCommandOptions,[].slice.call(arguments,1)),d||(d="group-"+(new Date).getTime().toString(),t[_virtual]=!0),t[_key]=d,n=t[_event_callback]&&isFunction(t[_event_callback])?t[_event_callback]:noop,this.groups.getLoading(d)?this.groups.get(d)?n.call(this,null,this.groups.get(d)):this.groups.setLoading(d,t):(this.groups.setLoading(d,t),this.parameters.set(t,void 0,!0),s=this.get(_dynamic)||l,r=(_forceSSL||isHTTPS()?"https:":"http:")+"//"+(s?_PactSafe.envAPI:_PactSafe.envVault)+"/",o=this.get(_browser_locale),s?(i="load/",buildAction(this.parameters),a="group.js?"+this.parameters.get(_event_payload)):(i="s/"+this.get(_site_id)+"/groups/"+d+"/",a="group.js"),this.parameters.data.overrides={},null!=t[_src]?createScriptElement(t[_src],n):!s&&this.get(_localized)&&o&&0!=o.indexOf("en")?(a="group-"+o+".js",translationExists(r+"?prefix="+i+a+"&max-keys=1",function(e){e||(a="group.js"),createScriptElement(r+i+a,n)})):createScriptElement(r+i+a,n)))}},Site.prototype.render=function(e){var t=[].slice.call(arguments);this.groups.initialized.map(function(e,n){n.render&&n.render.apply(n,t)})},Site.prototype.resetSystemInfo=function(){setSystemInfo(this.parameters)};var wrapCallback=function(e,t){return function(n,r,i,a,o){e(n,r,i,a,o),n||trigger("sent",r,{contracts:t[_contracts],versions:t[_versions],group:t[_group]},i,a,o)}},parseRetrieve=function(e){return function(t,n,r,i){var a;if(i&&i.response)try{a=_json._parse(i.responseText)}catch(t){}r&&isFunction(r.handleRetrieve)?r.handleRetrieve(t,a,i,r):t||trigger("retrieved",a,i,r),e(t,a,i,r)}},ClickwrapGroup=function(e){function t(e,t){n.parameters.data.set(e,t)}var n=this;n.parameters=new ParameterStore(n),n.agreed=new ParameterStore(n),n.checked=new ParameterStore(n),n.displayed={},n.sent={},n.rendered=!1,n.inputInjected=!1,n.signerIdListening=!1,t(_object_name,e[_contracts]?"contract":"agreement"),t(_contract_class,"ps-"+n.get(_object_name)),t(_data_attr,e[_contracts]?"cid":"aid"),t(_key,e[_key]),t(_type,e[_type]),t(_style,e[_style]),t(_policy,e[_policy]),t(_target_jurisdictions,e[_target_jurisdictions]),t(_execution_method,e[_execution_method]),t(_group,e[_group]||e[_agreement_group]),t(_request,e[_request]),t(_container_selector,e[_selector]||e[_container_selector]),t(_form_selector,e[_form_selector]),t(_hidden_input_selector,e[_hidden_input_selector]||"__ps-"+n.get(_object_name)+"s"),t(_element,e[_selector]||e[_container_selector]),t(_signer_id_selector,e[_signer_id_selector]||e[_respondent_id_selector]),t(_contracts,e[_contracts]||e[_agreements]||[]),t(_versions,e[_versions]||[]),t(_major_versions,e[_major_versions]||[]),t(_revisions,e[_revisions]),t(_contract_html,e[_contract_html]||e[_agreement_html]),t(_block_form_submission,e[_block_form_submission]),t(_force_scroll,e[_force_scroll]),t(_alert_message,e[_alert_message]||""),t(_auto_run,e[_auto_run]),t(_display_all,e[_display_all]),t(_confirmation_email,e[_confirmation_email]),t(_send_displayed,e[_send_displayed]),t(_allow_disagreed,e[_allow_disagreed]),t(_agreed,!1),t(_snapshot_location,e[_snapshot_location]),t(_dynamic,e[_dynamic]),t(_render_id,e[_render_id]),t(_render_data,e[_render_data]),n.resetData(),_PactSafe("onReady",function(){n.listenForElement(n.get(_container_selector),_bind(n.render,n))}),n.get(_signer_id_selector)?_PactSafe("onReady",function(){n.listenForElement(n.get(_signer_id_selector),_bind(n.listenForSignerId,n))}):_listenTo("set:"+_signer_id_selector,function(){n.listenForElement(n.get(_signer_id_selector),_bind(n.listenForSignerId,n))}),n.get(_form_selector)||_listenTo("set:"+_form_selector,function(){n.listenForElement(n.get(_form_selector),_bind(n.injectHiddenInput,n))})};ClickwrapGroup.prototype.toString=function(){return"[object ClickwrapGroup]"},ClickwrapGroup.prototype.toJSON=function(){return this.getParams()},ClickwrapGroup.prototype.get=function(e){return this.parameters.get(e)},ClickwrapGroup.prototype.set=function(e,t){this.parameters.set(e,t)},ClickwrapGroup.prototype.extend=function(e,t){this.parameters.extend(e,t)},ClickwrapGroup.prototype.getParams=function(e){var t=this;return e=t.getOverrides(e),t.site.getParams(e)},ClickwrapGroup.prototype.getPayload=function(e){var t=this;return e=t.getOverrides(e),t.site.getPayload(e)},ClickwrapGroup.prototype.getOverrides=function(e){var t=this;return e&&"object"==typeof e||(e={}),e[_contracts]=e[_contracts]||t.get(_contracts),e[_versions]=e[_versions]||t.get(_versions),e[_revisions]=e[_revisions]||t.get(_revisions),e[_group]=t.get(_group),e[_request]=t.get(_request),e[_confirmation_email]=t.get(_confirmation_email),e[_execution_method]=e[_execution_method]||t.get(_execution_method),e[_dynamic]=t.get(_dynamic),e[_render_id]=t.get(_render_id),t.get(_render_data)&&(e[_render_data]=t.get(_render_data)),e[_context]=t,e},ClickwrapGroup.prototype.send=function(e){var t,n,r,i=this;1>arguments.length||("string"==typeof arguments[0]?(t=arguments[0],n=[].slice.call(arguments,1)):(t=arguments[0]&&arguments[0][_event_type],n=arguments),t&&(n=toObject(sendCommandOptions[t]||[],n),n=i.getOverrides(n),n[_event_type]=t,r=isFunction(n[_event_callback])?n[_event_callback]:null,!r&&isFunction(i.site.get(_event_callback))&&(r=i.site.get(_event_callback)),n[_event_callback]=function(e){if(!e){if("agreed"==t)for(var a=i.site.get(_signer_id),o=0;o<n[_contracts].length;o++)i.agreed.data.set(n[_contracts][o],!0),i.sent[n[_contracts][o]]=a;else if("disagreed"==t)for(o=0;o<n[_contracts].length;o++)i.agreed.data.set(n[_contracts][o],!1),i.sent[n[_contracts][o]]=!1;emit(t,n,i.get(_element))}i.updateHiddenInput(!i.block()),r&&isFunction(r)&&r.apply(this,arguments)},i.site.send(t,n)))},ClickwrapGroup.prototype.getData=function(){var e=this,t={};return t[_contracts]=e.get(_contracts),t[_versions]=e.get(_versions),t[_group]=e.get(_group),e.get(_revisions)&&(t[_revisions]=e.get(_revisions)),e.get(_request)&&(t[_request]=e.get(_request)),e.get(_render_id)&&(t[_render_id]=e.get(_render_id)),e.get(_render_data)&&(t[_render_data]=e.get(_render_data)),t},ClickwrapGroup.prototype.getAgreed=function(){for(var e=this,t=e.get(_contracts),n=e.get(_versions),r=e.get(_revisions),i=[],a=[],o=[],s=0;s<t.length;s++)e.agreed.data.get(t[s])&&(i.push(t[s]),a.push(n[s]),r&&o.push(r[s]));var l={};return l[_contracts]=i,l[_versions]=a,l[_group]=e.get(_group),r&&(l[_revisions]=o),e.get(_request)&&(l[_request]=e.get(_request)),e.get(_render_id)&&(l[_render_id]=e.get(_render_id)),l},ClickwrapGroup.prototype.getInvalid=function(){for(var e=this,t=e.get(_contracts),n=e.get(_versions),r=e.get(_revisions),i=[],a=[],o=[],s=0;s<t.length;s++)e.agreed.data.get(t[s])||(i.push(t[s]),a.push(n[s]),r&&o.push(r[s]));var l={};return l[_contracts]=i,l[_versions]=a,l[_group]=e.get(_group),r&&(l[_revisions]=o),e.get(_request)&&(l[_request]=e.get(_request)),e.get(_render_id)&&(l[_render_id]=e.get(_render_id)),l},ClickwrapGroup.prototype.getChecked=function(e){for(var t=this,n=t.get(_contracts),r=t.get(_versions),i=t.get(_revisions),a=t.site.get(_signer_id),o=[],s=[],l=[],d=0;d<n.length;d++)!t.checked.data.get(n[d])||e&&t.sent[n[d]]===a||(o.push(n[d]),s.push(r[d]),i&&l.push(i[d]));var c={};return c[_contracts]=o,c[_versions]=s,c[_group]=t.get(_group),i&&(c[_revisions]=l),t.get(_request)&&(c[_request]=t.get(_request)),t.get(_render_id)&&(c[_render_id]=t.get(_render_id)),c},ClickwrapGroup.prototype.sendChecked=function(e){var t=this,n=t.getChecked(e);return!!n[_contracts].length&&(t.send("agreed",n),!0)},ClickwrapGroup.prototype.sendDisplayed=function(){var e=this,t=e.get(_element),n=e.site.get(_signer_id)||!1,r=[],i=[],a=[];if(t&&n){for(var o=e.getContractElements(),s=e.get(_data_attr),l=0;l<o.length;l++)"block"==o[l].style.display&&(r=r.concat((getAttribute(o[l],"data-"+s)||"").split(",")),i=i.concat((getAttribute(o[l],"data-vid")||"").split(",")),a=a.concat((getAttribute(o[l],"data-rev")||"").split(",")));if(r.length){var d={};d[_contracts]=[],d[_versions]=[],a.length&&(d[_revisions]=[]);for(l=0;l<r.length;l++)e.displayed[r[l]]!==n&&(e.displayed[r[l]]=n,d[_contracts].push(r[l]),d[_versions].push(i[l]),a.length&&d[_revisions].push(a[l]));e.get(_render_id)&&(d[_render_id]=e.get(_render_id)),d[_contracts].length&&e.get(_send_displayed)&&e.send("displayed",d)}}},ClickwrapGroup.prototype.listenForElement=function(e,t){var n=!1,r=null;r=function(i,a){if(!n){var o=getElement(e);o&&(n=!0,a&&isFunction(a.disconnect)?a.disconnect():stopListening(document,"DOMNodeInserted",r,!1),t&&isFunction(t)&&t.call(this))}};var i=null;window.MutationObserver&&isFunction(window.MutationObserver)?(i=new MutationObserver(r),i.observe(document,{attributes:!0,childList:!0,subtree:!0})):listenTo(document,"DOMNodeInserted",r,!1),r(null,i)},ClickwrapGroup.prototype.listenForSignerId=function(){var e=getElement(this.get(_signer_id_selector));e&&!this.signerIdListening&&(this.signerIdListening=!0,e.value&&this.site.set(_signer_id,e.value),listenTo(e,"change",_bind(this.handleInput,this)),listenTo(e,"autofill",_bind(this.handleInput,this)))},ClickwrapGroup.prototype.injectHiddenInput=function(){var e=getElement(this.get(_form_selector));if(e&&!this.inputInjected){this.inputInjected=!0;var t=document.createElement("input");setAttribute(t,["type","name","class"],["hidden",this.get(_hidden_input_selector),this.get(_hidden_input_selector)]),t.value=!1,e.appendChild(t)}this.updateHiddenInput(!this.block())},ClickwrapGroup.prototype.updateHiddenInput=function(e){var t=getElement(this.get(_form_selector)),n=this.get(_element),r=this.get(_agreed)!=e;if(this.set(_agreed,e),n&&(setAttribute(n,"data-all-agreed",e),this.updateAgreedAttributes()),t&&this.inputInjected){var i=getByClassName(t,this.get(_hidden_input_selector));if(i&&0<i.length&&(i[0].value=e),this.get(_block_form_submission)){var a=this.getFormSubmit();a&&a.setCustomValidity&&isFunction(a.setCustomValidity)&&a.setCustomValidity(e?"":this.get(_alert_message))}}r&&setTimeout(_bind(function(){trigger(e?"valid":"invalid",this.getData(),this)},this),0),setTimeout(_bind(function(){trigger("validated",e,{agreed:this.allAgreed(),checked:this.allChecked()},this),emit("validated",e,n)},this),0)},ClickwrapGroup.prototype.updateAgreedAttributes=function(){var e=this.get(_element);if(e)for(var t=this.getContractElements(),n=[],r=!1,i=this.get(_data_attr),a=0;a<t.length;a++){n=(getAttribute(t[a],"data-"+i)||"").split(","),r=!0;for(var o=0;o<n.length;o++)if(!1===this.agreed.data.get(n[o])){r=!1;break}setAttribute(t[a],"data-agreed",r)}},ClickwrapGroup.prototype.getContractElements=function(){var e=this.get(_element);return e?getByClassName(e,this.get(_contract_class)):[]},ClickwrapGroup.prototype.getFormSubmit=function(){var e,t=getElement(this.get(_form_selector));return t&&(e=findInputByType(t,"input","submit")||findInputByType(t,"button","submit")),e},ClickwrapGroup.prototype.resetData=function(){var e=this,t=e.get(_contracts);e.displayed={},e.sent={};for(var n=0;n<t.length;n++)e.agreed.data.set(t[n],!1),e.checked.data.set(t[n],!1)},ClickwrapGroup.prototype.render=function(e){var t=this,n=t.get(_element);if(t.rendered&&!0!==e||(t.injectHiddenInput(),n&&(t.injectHTML(n),t.rendered=!0,setTimeout(function(){trigger("rendered",t),emit("rendered",t,n)},0))),t.get(_policy)&&t.buildDynamicSignerLinks(),t.rendered)if(t.get(_display_all)&&t.displayAll(),t.site.get(_signer_id))if(t.get(_auto_run)){var r=isFunction(t.site.get(_event_callback))?t.site.get(_event_callback):noop;t.site.retrieve({contracts:t.get(_contracts),_context:t,event_callback:function(){r.apply(this,arguments),t.display.apply(t,arguments)}})}else t.site.retrieve({contracts:t.get(_contracts),_context:t});else for(var i=t.get(_contracts),a=0;a<i.length;a++)t.agreed.data.set(i[a],!1)},ClickwrapGroup.prototype.buildDynamicSignerLinks=function(){for(var e=this,t=e.get(_element),n=getByClassName(t,"ps-contract-link"),r=getElement("ps-group-"+e.get(_key)).getAttribute("data-legal"),i=0;i<n.length;i++){var a={};e.get(_group)&&(a.g=e.get(_group)),e.site.get(_jurisdiction)&&(a.jur=e.site.get(_jurisdiction)),e.site.get(_signer_id)&&(a.sig=encodeURIComponent(e.site.get(_signer_id))),e.site.get(_test_mode)&&(a.tm=encodeURIComponent(e.site.get(_test_mode)));var o=r;for(var s in a)o+=-1!=o.indexOf("?")?"&":"?",o+=s+"="+a[s];n[i].getAttribute("data-ckey")&&(o+="#"+n[i].getAttribute("data-ckey")),n[i].setAttribute("href",o)}},ClickwrapGroup.prototype.injectHTML=function(e){if(e){var t=this.get(_contracts),n=this.get(_object_name);e.innerHTML=this.get(_contract_html);var r=getByClassName(e,"ps-"+n+"-target"),i=getByClassName(e,"ps-expand-button"),a=getByClassName(e,"ps-collapse-button"),o=getByClassName(e,"ps-"+n+"-body"),s=getByClassName(e,"ps-attr");this.get(_force_scroll)&&this.setupScrollListeners();for(var l=0;l<r.length;l++)"BUTTON"==r[l].tagName?listenTo(r[l],"click",_bind(this.handleClick,this),!1):listenTo(r[l],"change",_bind(this.handleClick,this),!1),o&&o.length>0&&listenTo(r[l],"change",_bind(this.togglePane,this),!1);for(l=0;l<s.length;l++)listenTo(s[l],"change",_bind(this.handleAttributeInput,this)),listenTo(s[l],"autofill",_bind(this.handleAttributeInput,this));for(var d=0;d<i.length;d++)listenTo(i[d],"click",_bind(this.togglePane,this),!1);for(d=0;d<a.length;d++)listenTo(a[d],"click",_bind(this.togglePane,this),!1);for(l=0;l<t.length;l++)this.checked.data.set(t[l],!1);this.updateHiddenInput(!this.block())}},ClickwrapGroup.prototype.setupScrollListeners=function(){var e=this,t=e.get(_element),n=getByClassName(t,"ps-contract-force-scroll"),r=_bind(e.handleScroll,e);e.set(_scroll_listener,r);for(var i=0;i<n.length;i++)listenTo(n[i],"scroll",r,!1);setTimeout(function(){for(var e=0;e<n.length;e++)r({target:n[e]})},250)},ClickwrapGroup.prototype.handleScroll=function(e){if(e&&e.target){var t=this.get(_element),n=e.target,r=[].slice.call(getByClassName(n,"ps-contract-scroll-bottom")),i=getByClassName(t,"ps-contract-scroll-bottom").length;hasClass(n,"ps-contract-scroll-bottom")&&r.push(n);for(var a=r.length,o=0;o<r.length;o++)Math.ceil(1+n.scrollTop+n.clientHeight)>=r[o].scrollHeight&&(a-=1,i-=1,this.unblockScroll(r[o]));i||this.unblockScroll(),a&&i||stopListening(n,"scroll",this.get(_scroll_listener),!1)}},ClickwrapGroup.prototype.unblockScroll=function(e){var t,n,r;if(e){removeClass(e,"ps-contract-scroll-bottom");var i=getAttribute(e,"data-cid");if(i){var a=getElement("ps-contract-"+i);t=getElement("ps-scroll-message-"+i),n=getElement("ps-checkbox-clickable-"+i),t&&(t.style.display="none"),n&&(n.style.display="block"),setAttribute(a,"data-scrolled",!0),trigger("scrolled:contract",a,this),emit("scrolled:contract",this,a)}}else{for(e=this.get(_element),t=getByClassName(e,"ps-scroll-message"),n=getByClassName(e,"ps-checkbox-clickable"),r=0;r<t.length;r++)t[r].style.display="none";for(r=0;r<n.length;r++)n[r].style.display="block";trigger("scrolled",e,this),emit("scrolled",this,e)}},ClickwrapGroup.prototype.retrieveHTML=function(e){if(!window.XMLHttpRequest)return!1;var t=this,n=new window.XMLHttpRequest,r=transportHost()+"/load/html?";e&&t.set(_render_data,e);var i=t.getData();return t.site.parameters.set(i,void 0,!0),buildAction(t.site.parameters),r+=t.site.get(_event_payload),t.site.parameters.data.overrides={},n.open("GET",r,!0),"withCredentials"in n&&(n.withCredentials=!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){if(4==n.readyState){try{var e=n.getResponseHeader("X-Render-ID");e&&t.set(_render_id,e)}catch(e){}t.set(_contract_html,n.responseText),t.resetData(),t.render(!0),n=null}},n.send(),!0},ClickwrapGroup.prototype.handleRetrieve=function(e,t,n,r){if(t&&"object"==typeof t){var i,a,o=this.get(_contracts),s=this.get(_major_versions);for(var l in s&&s.length||(s=this.get(_versions)),t)t.hasOwnProperty(l)&&(i=parseInt(l),a=o.indexOf(i),a>=0&&(!t[l]||t[l]!=s[a]&&"true"!=t[l]?this.agreed.data.set(i,!1):this.agreed.data.set(i,!0)))}e||trigger("retrieved",t,n,r),this.site.get(_disable_sending)?this.updateHiddenInput(!this.block()):this.sendChecked(!0)||this.updateHiddenInput(!this.block())},ClickwrapGroup.prototype.display=function(){if(this.get(_display_all))this.displayAll();else if(this.get(_policy)){var e=this.get(_target_jurisdictions);isArray(e)&&e.length?e.indexOf(this.site.get(_jurisdiction))>-1&&this.displayRequired():this.displayRequired()}else this.displayRequired()},ClickwrapGroup.prototype.displayRequired=function(){var e=this.get(_element);if(e){for(var t=this.getContractElements(),n=!1,r=[],i=this.get(_data_attr),a=0;a<t.length;a++)if(r=(getAttribute(t[a],"data-"+i)||"").split(","),r.length)for(var o=0;o<r.length;o++)if(!1===this.agreed.data.get(r[o])&&!1===this.agreed.data.get(r[o])){n="block"!=t[a].style.display,t[a].style.display="block",n&&setTimeout(_bind(function(e){trigger("displayed",e,this),emit("displayed",this,e)},this,t[a]),0);break}this.get(_policy)&&this.displayOptOut(t),this.sendDisplayed()}},ClickwrapGroup.prototype.displayAll=function(){var e=this.get(_element);if(e){for(var t=this.getContractElements(),n=!1,r=this.get(_data_attr),i=0;i<t.length;i++)t[i].hasAttribute("data-"+r)&&(n="block"!=t[i].style.display,t[i].style.display="block",n&&setTimeout(_bind(function(e){trigger("displayed",e,this),emit("displayed",this,e)},this,t[i]),0));this.get(_policy)&&this.displayOptOut(t),this.sendDisplayed()}},ClickwrapGroup.prototype.displayOptOut=function(e){for(var t=0;t<e.length;t++)if(cid=(getAttribute(e[t],"data-"+this.get(_data_attr))||"").split(","),cid.length)for(var n=0;n<cid.length;n++)if(!0===this.agreed.data.get(cid[n])){var r=e[t].parentElement.getElementsByClassName("opt-out-container");r[0].style.display="inline"}},ClickwrapGroup.prototype.hide=function(e){if(e){e=isArray(e)?e:[e];var t=this.get(_element);if(t)for(var n,r=this.getContractElements(),i=!1,a=[],o=this.get(_data_attr),s=0;s<r.length;s++){a=(getAttribute(r[s],"data-"+o)||"").split(",");for(var l=0;l<a.length;l++)if(n=parseInt(a[l]),!isNaN(n)&&-1<e.indexOf(n)){i="none"==r[s].style.display,r[s].style.display="none",i||setTimeout(_bind(function(e){trigger("hidden",e,this),emit("hidden",this,e)},this,r[s]),0);break}}}},ClickwrapGroup.prototype.hideAll=function(){var e=this.get(_element);if(e)for(var t=this.getContractElements(),n=!1,r=this.get(_data_attr),i=0;i<t.length;i++)t[i].hasAttribute("data-"+r)&&(n="none"==t[i].style.display,t[i].style.display="none",n||setTimeout(_bind(function(e){trigger("hidden",e,this),emit("hidden",this,e)},this,t[i]),0))},ClickwrapGroup.prototype.handleClick=function(e){if(e&&e.target){for(var t=this,n=t.site.get(_signer_id)||!0,r=[],i=[],a=[],o={},s="BUTTON"==e.target.tagName||e.target.checked,l=e.target.value.split(","),d=0,c=null;d<l.length;d++)c=l[d].split(":"),s&&t.sent[c[0]]!==n&&(r.push(c[0]),i.push(c[1]),c.length>2&&a.push(c[2])),t.checked.data.set(c[0],s);if(emit(s?"checked":"unchecked",t,e.target),r.length){if(o[_contracts]=r,o[_versions]=i,a.length&&(o[_revisions]=a),t.get(_render_id)&&(o[_render_id]=t.get(_render_id)),"BUTTON"==e.target.tagName&&this.get(_element)){var u=getByClassName(this.get(_element),"ps-attr"),_=this.site.get(_custom_data)||{};for(d=0;d<u.length;d++)_[u[d].getAttribute("name")]=u[d].value;o[_custom_data]=_,t.send("updated",o)}console.log("check status: ",s?"yes":"no"),s?t.send(t.get(_policy)?"opted_in":"agreed",o):t.get(_allow_disagreed)&&t.send("disagreed",o)}else t.updateHiddenInput(!t.block())}},ClickwrapGroup.prototype.togglePane=function(e){if(e&&e.target){var t=this,n=t.get(_object_name),r=t.get(_contract_class),i=e.target.parentElement,a=null,o=null,s=null;if(hasClass(e.target,"ps-accordion-link"))for(var l=getByClassName(this.get(_element),"ps-contract"),d=0;d<l.length;d++)l[d].dataset.cid==e.target.dataset.cid&&(i=l[d]);for(;i;){if(hasClass(i,r)){a=getByClassName(i,"ps-"+n+"-body"),a=a&&a.length>0?a[0]:null,o=getByClassName(i,"ps-expand-button"),o=o&&o.length>0?o[0]:null,s=getByClassName(i,"ps-collapse-button"),s=s&&s.length>0?s[0]:null,hasClass(e.target,"ps-collapse-button")||hasClass(e.target,"ps-"+n+"-target")&&e.target.checked?(a&&(a.style.display="none"),s&&(s.style.display="none"),o&&(o.style.display="inline-block"),removeClass(i,"ps-expanded")):(hasClass(e.target,"ps-expand-button")||hasClass(e.target,"ps-"+n+"-target")&&!e.target.checked)&&(a&&(a.style.display="block"),o&&(o.style.display="none"),s&&(s.style.display="inline-block"),addClass(i,"ps-expanded"));break}i=i.parentElement}}},ClickwrapGroup.prototype.handleInput=function(e){e&&e.target&&this.site.set(_signer_id,e.target.value)},ClickwrapGroup.prototype.handleAttributeInput=function(e){if(e&&e.target){var t=e.target;getElement(this.get(_signer_id_selector));if(hasClass(t,"ps-attr")){var n=getAttribute(t,"data-field")||getAttribute(t,"name");if(!isBlank(n)&&"signer_id"!=n){var r=this.site.get(_custom_data);r&&"object"==typeof r||(r={}),r[n]=t.value,this.site.set(_custom_data,r)}}}},ClickwrapGroup.prototype.block=function(){var e=!1,t=this.get(_display_all),n=this.get(_contracts);if(n)for(var r=0;r<n.length;r++)if(!this.agreed.data.get(n[r])||t&&!this.checked.data.get(n[r])){e=!0;break}return e},ClickwrapGroup.prototype.allAgreed=function(){var e=!0,t=this.get(_contracts);if(t)for(var n=0;n<t.length;n++)if(!this.agreed.data.get(t[n])){e=!1;break}return e},ClickwrapGroup.prototype.allChecked=function(){var e=!0,t=this.get(_contracts);if(t)for(var n=0;n<t.length;n++)if(!this.checked.data.get(t[n])){e=!1;break}return e};var BrowsewrapGroup=function(e){function t(e,t){n.parameters.data.set(e,t)}var n=this;n.parameters=new ParameterStore(n),n.rendered=!1,n.badgeInjected=!1,n.eventsAttached=!1,t(_key,e[_key]),t(_type,e[_type]),t(_group,e[_group]||e[_agreement_group]),t(_contracts,e[_contracts]||e[_agreements]||[]),t(_versions,e[_versions]||[]),t(_major_versions,e[_major_versions]||[]),t(_target_selector,e[_selector]||e[_target_selector]),t(_element,e[_selector]||e[_target_selector]),t(_style,e[_style]),t(_position,e[_position]||"auto"),t(_class_name,e[_class_name]||"ps-browsewrap-badge"),t(_stylesheet,e[_stylesheet]),t(_legal_center_url,e[_legal_center_url]),t(_open_legal_center,e[_open_legal_center]),t(_always_visible,e[_always_visible]),t(_badge_text,e[_badge_text]),t(_badge_updater,noop),t(_update_interval,e[_update_interval]||200),t(_dynamic,e[_dynamic]),t(_render_id,e[_render_id]),t(_render_data,e[_render_data]),_PactSafe("onReady",function(){n.listenForElement(n.get(_target_selector),_bind(n.render,n))}),_listenTo("set:"+_always_visible,function(){!0===n.get(_always_visible)?n.removeEvents():!1===n.get(_always_visible)&&n.setupEvents()}),_listenTo("set:"+_position,function(){!0===n.badgeInjected&&n.updatePosition()})},styleProcessor1=function(e){var t=window.getComputedStyle(e).overflowY;return"auto"==t||"scroll"==t},styleProcessor2=function(e){var t=e.currentStyle.overflowY;return"auto"==t||"scroll"==t
},styleProcessor3=function(e){return"scroll"==e.style.overflow||"scroll"==e.style.overflowY||"auto"==e.style.overflow||"auto"==e.style.overflowY||e.clientHeight<e.scrollHeight},inViewport=function(e){var t,n;return!(!e||1!==e.nodeType)&&(n=document.documentElement,t=e.getBoundingClientRect(),!!t&&t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||n.clientHeight)&&t.left<=(window.innerWidth||n.clientWidth))};BrowsewrapGroup.prototype.toString=function(){return"[object BrowsewrapGroup]"},BrowsewrapGroup.prototype.toJSON=function(){return this.getParams()},BrowsewrapGroup.prototype.get=function(e){return this.parameters.get(e)},BrowsewrapGroup.prototype.set=function(e,t){this.parameters.set(e,t)},BrowsewrapGroup.prototype.extend=function(e,t){this.parameters.extend(e,t)},BrowsewrapGroup.prototype.getParams=function(e){var t=this;return e=t.getOverrides(e),t.site.getParams(e)},BrowsewrapGroup.prototype.getPayload=function(e){var t=this;return e=t.getOverrides(e),t.site.getPayload(e)},BrowsewrapGroup.prototype.getOverrides=function(e){var t=this;return e&&"object"==typeof e||(e={}),e[_contracts]=e[_contracts]||t.get(_contracts),e[_versions]=e[_versions]||t.get(_versions),e[_group]=t.get(_group),e[_render_id]=t.get(_render_id),e[_context]=t,e},BrowsewrapGroup.prototype.send=function(e){var t,n,r=this;1>arguments.length||("string"==typeof arguments[0]?(t=arguments[0],n=[].slice.call(arguments,1)):(t=arguments[0]&&arguments[0][_event_type],n=arguments),t&&(n=toObject(sendCommandOptions[t]||[],n),n=r.getOverrides(n),n[_event_type]=t,r.site.send(t,n)))},BrowsewrapGroup.prototype.openLegalCenter=function(e){var t=this;if(t.send("visited"),e&&e.target&&e.target.hasAttribute("data-url"))return window.open(getAttribute(e.target,"data-url"),"_blank")},BrowsewrapGroup.prototype.render=function(e){var t=this,n=t.get(_element);if((!t.rendered||e)&&n)if(t.wrapElement(),t.rendered=!0,setTimeout(function(){trigger("rendered",t),emit("rendered",t,n)},0),t.get(_always_visible)){var r=t.updateBadge(t.get(_badge_element));t.set(_badge_updater,r),r&&isFunction(r)&&r.call(window,null,!0)}else t.setupEvents()},BrowsewrapGroup.prototype.listenForElement=function(e,t){var n=this,r=!1,i=null;i=function(i,a){var o=getElement(e),s=n.get(_badge_element);if(null!=s&&null!=o&&o.parentNode!=s.parentNode&&!n.reRendering)return n.reRendering=!0,n.removeEvents(),n.render(!0),void(n.reRendering=!1);r||o&&(r=!0,t&&isFunction(t)&&t.call(this))};var a=null;window.MutationObserver&&isFunction(window.MutationObserver)?(a=new MutationObserver(i),a.observe(document,{attributes:!0,childList:!0,subtree:!0})):listenTo(document,"DOMNodeInserted",i,!1),i(null,a)},BrowsewrapGroup.prototype.listenForScrollElement=function(e){var t=this,n=!1,r=null;r=_debounce(function(i,a){if(n)a&&isFunction(a.disconnect)&&a.disconnect();else{var o=t.findScrollParent();o&&(n=!0,a&&isFunction(a.disconnect)?a.disconnect():stopListening(window,"DOMContentLoaded",r),stopListening(window,"resize",r),listenTo(o,"scroll",e,!1),t.set(_scroll_element,o))}},300);var i=null;window.MutationObserver&&isFunction(window.MutationObserver)?(i=new MutationObserver(r),i.observe(document,{attributes:!0,childList:!0,subtree:!0})):listenTo(document,"DOMContentLoaded",r),r(null,i)},BrowsewrapGroup.prototype.findScrollParent=function(){var e=this.get(_element).parentElement,t=null;for(t=window.getComputedStyle&&isFunction(window.getComputedStyle)?styleProcessor1:void 0!==e.currentStyle?styleProcessor2:styleProcessor3;e&&!t(e);)e=e.parentElement;return e},BrowsewrapGroup.prototype.wrapElement=function(){var e=this.get(_element);if(!e)return!1;var t=document.createElement(e.tagName.toLowerCase());t.className=this.get(_class_name),t.innerHTML=this.get(_badge_text)||e.innerHTML,setAttribute(t,["data-key","data-gid","data-cid","data-vid"],[this.get(_key),this.get(_group),this.get(_contracts).join(","),this.get(_versions).join(",")]),this.get(_open_legal_center)&&("A"==e.tagName?(e.hasAttribute("href")&&setAttribute(e,"data-href",getAttribute(e,"href")),setAttribute(e,"href",this.get(_legal_center_url)),e.hasAttribute("title")&&setAttribute(t,"title",getAttribute(e,"title")),setAttribute(t,["data-href","href","target"],[getAttribute(e,"data-href"),this.get(_legal_center_url),"_blank"])):(setAttribute(e,"data-url",this.get(_legal_center_url)),setAttribute(t,"data-url",this.get(_legal_center_url))),listenTo(e,"click",_bind(this.openLegalCenter,this),!1),listenTo(t,"click",_bind(this.openLegalCenter,this),!1));var n=document.createElement("div");return setAttribute(n,"id","ps-badge-"+this.get(_key)),n.className="ps-browsewrap-wrapper",n.innerHTML=this.get(_stylesheet),e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(t),this.badgeInjected=!0,this.set(_badge_element,t),this.updatePosition(),t},BrowsewrapGroup.prototype.setupEvents=function(){if(!this.eventsAttached){var e=this.get(_badge_element),t=this.findScrollParent(),n=this.updateBadge(e);this.set(_badge_updater,n),listenTo(window,"DOMContentLoaded",n,!1),listenTo(window,"load",n,!1),listenTo(window,"scroll",n,!1),listenTo(window,"resize",n,!1),t?(this.set(_scroll_element,t),listenTo(t,"scroll",n,!1)):this.listenForScrollElement(n);var r=null;window.MutationObserver&&isFunction(window.MutationObserver)?(r=new MutationObserver(n),r.observe(document,{attributes:!0,childList:!0,subtree:!0}),this.set(_mutation_observer,r)):listenTo(document,"DOMNodeInserted",n),this.eventsAttached=!0}},BrowsewrapGroup.prototype.removeEvents=function(){if(this.eventsAttached){var e=this.get(_badge_updater),t=this.get(_scroll_element),n=this.get(_mutation_observer);stopListening(window,"DOMContentLoaded",e,!1),stopListening(window,"load",e,!1),stopListening(window,"scroll",e,!1),stopListening(window,"resize",e,!1),t&&stopListening(t,"scroll",e,!1),n&&isFunction(n.disconnect)&&n.disconnect(),e&&isFunction(e)&&e.call(window,null,!0),this.eventsAttached=!1}},BrowsewrapGroup.prototype.updatePosition=function(){var e=this.get(_element),t=this.get(_badge_element);if(!e||!t)return!1;switch(t.style.marginLeft&&t.style.removeProperty("margin-left"),this.get(_position)){case"left":t.style.left="20px",t.style.right="auto";break;case"right":t.style.left="auto",t.style.right="20px";break;case"center":t.style.left="50%",t.style.right="auto",t.style.display="inline-block",t.offsetWidth>0&&(t.style.marginLeft="-"+Math.floor(t.offsetWidth/2)+"px"),t.style.removeProperty("display");break;default:t.style.left=e.getBoundingClientRect().left+"px",t.style.right="auto"}setAttribute(t,"data-position",this.get(_position))},BrowsewrapGroup.prototype.updateBadge=function(e){var t=this,n=null,r=null;return r=_throttle(function(r,i){if(r&&"resize"==r.type&&"auto"==getAttribute(e,"data-position")&&t.updatePosition(),!0===i)return n=null,void addClass(e,"ps-browsewrap-stuck");var a=inViewport(e.parentElement);a!==n?(n=a,a?removeClass(e,"ps-browsewrap-stuck"):addClass(e,"ps-browsewrap-stuck")):n=a},t.get(_update_interval)),r(),r},BrowsewrapGroup.prototype.forceUpdate=function(){var e=this.get(_badge_updater);e&&isFunction(e)&&e.apply(window,arguments)};var _grp=defineGroup("group",ClickwrapGroup),_bdg=defineGroup("badge",BrowsewrapGroup),commandExecution=function(e){if(isFunction(e[0]))this.method=e[0];else{var t=commandStringFormat.exec(e[0]);if(null!=t&&4==t.length&&(this.siteName=t[1]||"s0",this.groupName=t[2]||"",this.methodName=t[3],this.args=[].slice.call(e,1),this.groupName&&null!=this.groupName||(this.isCreate="create"==this.methodName,this.isRemove="remove"==this.methodName,this.isLoad="load"==this.methodName,this.isInitialize="initialize"==this.methodName),this.isGlobal="onReady"==this.methodName),!this.methodName)throw"command_missing_method";if(this.isInitialize){if(this.args.length<1||isBlank(this.args[0]))throw"command_missing_key"}else if(this.isLoad&&(this.args.length<1||"string"!=typeof this.args[0]&&"object"!=typeof this.args[0]))throw"command_missing_key";if(containsPeriodOrColon(this.siteName)||containsPeriodOrColon(this.groupName))throw"command_invalid_format"}},commandStringFormat=/^(?:([\w\-\_]+)\.)?(?:([\w\-\_]+):)?(\w+)$/,containsPeriodOrColon=function(e){return 0<=e.indexOf(".")||0<=e.indexOf(":")},Runner={ps:function(){Runner.commands=[],Runner.onReady=[],Runner.listeners={all:[]},Runner.listenersOnce={},Runner.listenersInternal={all:[]},Runner.listenersOnceInternal={}}};Runner.ps(),Runner.addListeners=function(e){for(var t=0;t<arguments.length;t++)_PactSafe.on.apply(this,arguments[t])},Runner.addListenersOnce=function(e){for(var t=0;t<arguments.length;t++)_PactSafe.once.apply(this,arguments[t])},Runner.removeListeners=function(e){for(var t=0;t<arguments.length;t++)_PactSafe.off.apply(this,arguments[t])},Runner.executeCommands=function(e){var t=Runner.buildArray.apply(Runner,arguments);t=Runner.commands.concat(t);for(Runner.commands=[];0<t.length&&!Runner.run(t[0])&&(t.shift(),!(0<Runner.commands.length)););Runner.commands=Runner.commands.concat(t)},Runner.buildArray=function(e){for(var t=[],n=0;n<arguments.length;n++)try{var r=new commandExecution(arguments[n]);t.push(r)}catch(e){}return t},Runner.run=function(e){try{if(e.method)e.method.call(window,_PactSafe.getByName("s0"));else{var t=e.siteName==_globalName?_PactSafe:_PactSafe.getByName(e.siteName);if(e.isCreate)"s0"==e.siteName&&_PactSafe.create.apply(_PactSafe,e.args);else if(e.isRemove)_PactSafe.remove(e.siteName);else if(e.isGlobal)_PactSafe[e.methodName].apply(_PactSafe,e.args);else if(t)if(isBlank(e.groupName))if(e.isInitialize){if(!1!==t.groups.getLoading(e.args[0]))t[e.methodName].apply(t,e.args);else for(var n=_PactSafe.getAll(),r=0,i=n.length;r<i;r++)if(!1!==n[r].groups.getLoading(e.args[0])){n[r][e.methodName].apply(n[r],e.args);break}}else t[e.methodName].apply(t,e.args);else{var a=t.groups.get(e.groupName);a&&a[e.methodName].apply(a,e.args)}}}catch(e){}};var _PactSafe=function(e){Runner.executeCommands.apply(Runner,[arguments])};_PactSafe.Sites={},_PactSafe.initiatedTime=0,_PactSafe.realThang=317,_PactSafe.readyFired=!1,_PactSafe.readyHandlersAttached=!1,_PactSafe.envAPI="response.pactsafe.local:5002",_PactSafe.envVault="local-vault.pactsafe.io";var createOptions=[_site_id,_name];_PactSafe.create=function(e){var t=toObject(createOptions,[].slice.call(arguments));t.name||(t.name="s0");var n=""+t.name;if(_PactSafe.Sites[n])return _PactSafe.Sites[n];var r=new Site(t);return _PactSafe.Sites[n]=r,_PactSafe.site||(_PactSafe.site=r),trigger("create",r),r},_PactSafe.remove=function(e){_PactSafe.Sites[e]&&(_PactSafe.Sites[e]=null)},_PactSafe.getByName=function(e){return _PactSafe.Sites[e]},_PactSafe.getAll=function(){var e=[];for(var t in _PactSafe.Sites)_PactSafe.Sites.hasOwnProperty(t)&&e.push(_PactSafe.Sites[t]);return e},_PactSafe.getByKey=function(e){for(var t=_PactSafe.getAll(),n=null,r=0,i=t.length;r<i&&(n=t[r].groups.get(e),!n);r++);return n},_PactSafe.getAllGroups=function(){for(var e=_PactSafe.getAll(),t=[],n=0,r=e.length;n<r;n++)e[n].groups.initialized.map(function(e,n){t.push(n)});return t},_PactSafe.onReady=function(e,t){isFunction(e)&&(_PactSafe.readyFired?setTimeout(function(){e()},1):Runner.onReady.push(e))},_PactSafe.on=function(e,t){isFunction(t)&&(Runner.listeners[e]||(Runner.listeners[e]=[]),Runner.listeners[e].push(t))};var _listenTo=function(e,t){isFunction(t)&&(Runner.listenersInternal[e]||(Runner.listenersInternal[e]=[]),Runner.listenersInternal[e].push(t))};_PactSafe.once=function(e,t){isFunction(t)&&(Runner.listenersOnce[e]||(Runner.listenersOnce[e]=[]),Runner.listenersOnce[e].push(t))};var _listenToOnce=function(e,t){isFunction(t)&&(Runner.listenersOnceInternal[e]||(Runner.listenersOnceInternal[e]=[]),Runner.listenersOnceInternal[e].push(t))};_PactSafe.off=function(e,t){if(e)if(isFunction(t)){var n;t=t.toString();if(Runner.listeners[e]){for(var r=0;r<Runner.listeners[e].length;r++)if(Runner.listeners[e][r].toString()===t){n=r;break}n>-1&&Runner.listeners[e].splice(n,1)}if(Runner.listenersOnce[e]){for(r=0;r<Runner.listenersOnce[e].length;r++)if(Runner.listenersOnce[e][r].toString()===t){n=r;break}n>-1&&Runner.listenersOnce[e].splice(n,1)}}else Runner.listeners[e]&&(Runner.listeners[e]=[]),Runner.listenersOnce[e]&&(Runner.listenersOnce[e]=[]);else Runner.listeners={all:[]},Runner.listenersOnce={}};var _stopListening=function(e,t){if(e)if(isFunction(t)){var n;t=t.toString();if(Runner.listenersInternal[e]){for(var r=0;r<Runner.listenersInternal[e].length;r++)if(Runner.listenersInternal[e][r].toString()===t){n=r;break}n>-1&&Runner.listenersInternal[e].splice(n,1)}if(Runner.listenersOnceInternal[e]){for(r=0;r<Runner.listenersOnceInternal[e].length;r++)if(Runner.listenersOnceInternal[e][r].toString()===t){n=r;break}n>-1&&Runner.listenersOnceInternal[e].splice(n,1)}}else Runner.listenersInternal[e]&&(Runner.listenersInternal[e]=[]),Runner.listenersOnceInternal[e]&&(Runner.listenersOnceInternal[e]=[]);else Runner.listenersInternal={all:[]},Runner.listenersOnceInternal={}},trigger=function(e){var t=[].slice.call(arguments,1);if(Runner.listeners[e])for(var n=0;n<Runner.listeners[e].length;n++)Runner.listeners[e][n].apply(_PactSafe,t);if(Runner.listenersOnce[e]){for(n=0;n<Runner.listenersOnce[e].length;n++)Runner.listenersOnce[e][n].apply(_PactSafe,t);Runner.listenersOnce[e]=[]}for(n=0;n<Runner.listeners.all.length;n++)Runner.listeners.all[n].apply(_PactSafe,arguments);triggerInternal.apply(this,arguments)},triggerInternal=function(e){var t=[].slice.call(arguments,1);if(Runner.listenersInternal[e])for(var n=0;n<Runner.listenersInternal[e].length;n++)Runner.listenersInternal[e][n].apply(_PactSafe,t);if(Runner.listenersOnceInternal[e]){for(n=0;n<Runner.listenersOnceInternal[e].length;n++)Runner.listenersOnceInternal[e][n].apply(_PactSafe,t);Runner.listenersOnceInternal[e]=[]}for(n=0;n<Runner.listenersInternal.all.length;n++)Runner.listenersInternal.all[n].apply(_PactSafe,arguments)};_PactSafe.enableDebug=function(e){_PactSafe.disableDebug(),e&&isFunction(e)&&(_PactSafe.debug=e),_listenTo("all",isFunction(_PactSafe.debug)?_PactSafe.debug:logDebug),_PactSafe.debugging=!0},_PactSafe.disableDebug=function(){_stopListening("all",isFunction(_PactSafe.debug)?_PactSafe.debug:logDebug),_PactSafe.debugging=!1},_PactSafe.setup=function(){var e=window[_globalName];if(!e||317!=e.realThang){_PactSafe.initiatedTime=e&&e.t,_PactSafe.loaded=!0,_PactSafe.debug=e&&e.debug||!1,_PactSafe.debug&&_PactSafe.enableDebug();var t=window[_globalName]=_PactSafe;if(defineMethod("create",t,t.create),defineMethod("remove",t,t.remove),defineMethod("getByName",t,t.getByName),defineMethod("getAll",t,t.getAll),defineMethod("getByKey",t,t.getByKey),defineMethod("getAllGroups",t,t.getAllGroups),defineMethod("onReady",t,t.onReady),defineMethod("on",t,t.on),defineMethod("once",t,t.once),defineMethod("off",t,t.off),defineMethod("enableDebug",t,t.enableDebug),defineMethod("disableDebug",t,t.disableDebug),t=Site.prototype,defineMethod("get",t,t.get),defineMethod("set",t,t.set),defineMethod("send",t,t.send),defineMethod("retrieve",t,t.retrieve),defineMethod("initialize",t,t.initialize),defineMethod("load",t,t.load),defineMethod("render",t,t.render),defineMethod("getByKey",t,t.getByKey),defineMethod("getAllGroups",t,t.getAllGroups),t=ClickwrapGroup.prototype,defineMethod("get",t,t.get),defineMethod("set",t,t.set),defineMethod("send",t,t.send),defineMethod("render",t,t.render),defineMethod("display",t,t.display),defineMethod("displayRequired",t,t.displayRequired),defineMethod("displayAll",t,t.displayAll),defineMethod("hide",t,t.hide),defineMethod("hideAll",t,t.hideAll),defineMethod("getAgreed",t,t.getAgreed),defineMethod("getChecked",t,t.getChecked),defineMethod("sendChecked",t,t.sendChecked),t=BrowsewrapGroup.prototype,defineMethod("get",t,t.get),defineMethod("set",t,t.set),defineMethod("send",t,t.send),defineMethod("render",t,t.render),defineMethod("openLegalCenter",t,t.openLegalCenter),defineMethod("findScrollParent",t,t.findScrollParent),defineMethod("wrapElement",t,t.wrapElement),defineMethod("setupEvents",t,t.setupEvents),defineMethod("removeEvents",t,t.removeEvents),defineMethod("forceUpdate",t,t.forceUpdate),t=ParameterStore.prototype,defineMethod("get",t,t.get),defineMethod("set",t,t.set),!isHTTPS()&&!_forceSSL){var n;e:{for(var r=document.getElementsByTagName("script"),i=0;i<r.length&&100>i;i++){var a=r[i].src;if(a&&0==a.indexOf("https://"+_PactSafe.envVault+"/ps.min.js")){n=!0;break e}}n=!1}n&&(_forceSSL=!0)}e&&(isArray(e.e)&&Runner.addListeners.apply(_PactSafe,e.e),isArray(e.eo)&&Runner.addListenersOnce.apply(_PactSafe,e.eo),isArray(e.o)&&Runner.removeListeners.apply(_PactSafe,e.o),trigger("ready"),isArray(e.q)&&Runner.executeCommands.apply(_PactSafe,e.q))}},attachReadyHandlers();var executeIfLoaded=function(e){return"prerender"!=document.visibilityState&&(e(),!0)};(function(){var e=_PactSafe.setup;if(!executeIfLoaded(e)){var t=!1,n=function(){!t&&executeIfLoaded(e)&&(t=!0,stopListening(document,"visibilitychange",n))};listenTo(document,"visibilitychange",n)}})()})(window);